1:# 要求仕様書 (2025-09-18 セッション)
2:
3:## 概要
4:- プラグイン名: AtmosViz
5:- 目的: Dolby Atmos 7.1.4 入力ストリームを 3D 空間に可視化し、各スピーカーの指向性・出力レベルを直感的に把握可能にする。
6:- 対象環境: Windows / Visual Studio 2022 (JUCE 8.0.1 ベース)
7:
8:## 機能要件
9:1. **入出力構成**
10:   - 入力: Dolby Atmos 7.1.4 バス。
11:   - 出力: モニタリング専用のサイレント出力。
12:2. **スピーカー配置**
13:   - Dolby 推奨角度・高さを採用した 12 スピーカー (7.1.4) プリセット。
14:   - 初期状態 (Home/Inside) はリスニングポジションからセンター/フロント L,R を正面に見る状態。
15:3. **3D 可視化**
16:   - スピーカー位置を球体で表示し、指向性ローブ (扇形) で RMS レベルと帯域バランスを表現。
17:   - LFE は球のみ表示。
18:   - ルームワイヤーフレーム: 内部視点では全実線、外部視点では前面実線・背面破線。
19:   - 原点に XYZ ギズモを表示。
20:4. **カメラ操作**
21:   - プリセットボタン (Home/Inside/Outside/Front/Back/Left/Right/Top/Bottom)。
22:   - Inside: 原点を中心に回転のみ実施。Outside: 距離を直接変更して俯瞰範囲を広げる。
23:   - 各プリセットは Home を基準とした回転方向に一致させ、Back/Left/Right で左右が正しく反転するよう調整。
24:5. **ズーム/距離制御**
25:   - 共通ズーム値 (0.001〜2.0) をスライダー・マウスホイールで調整。
26:   - Inside はズーム値が大きいほど近寄り、Outside はズーム値が小さいほど遠ざかる挙動。
27:   - Outside 選択時は初期距離を遠方 (約 40 m) に設定。
28:6. **ビルド/配置**
29:   - Visual Studio 2022 でビルドし、生成された `AtmosViz.vst3` を `%COMMONPROGRAMFILES%\VST3` へコピーして使用。
30:
31:## 非機能要件
32:- レイテンシ: 音声処理への影響がないこと (軽量解析)。
33:- フレームレート: 60 fps を目標。
34:- コード規約: C++17 / JUCE のスタイルに準拠。
35:
36:## 今後の検討事項
37:- ユーザー設定の永続化 (プリセット保存)。
38:- LFE 表現・カラーマッピングの拡張オプション。
39:- GUI テーマやローブ形状のカスタマイズ機能。
